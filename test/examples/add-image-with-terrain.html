<!DOCTYPE html>
<html lang="en">

<head>
    <title>Adding Raster Image via coordinates on terrain</title>
    <meta property="og:description" content="Use a raster layer with coordinates to add image to a map with 3d terrain." />
    <meta charset='utf-8'>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel='stylesheet' href='../../dist/maplibre-gl.css' />
    <script src='../../dist/maplibre-gl-dev.js'></script>
    <style>
        body {
            margin: 0;
            padding: 0;
        }

        html,
        body,
        #map {
            height: 100%;
        }
    </style>
</head>

<body>
    <div id="map"></div>
    <script>
        async function main() {

            const center = [11.43085, 47.32574];
            const map = new maplibregl.Map({
                container: 'map',
                center,
                zoom: 13,
                antialias: true,
                style: {
                    version: 8,
                    layers: [
                        {
                            id: 'baseColor', // Hides edges of terrain tiles, which have 'walls' going down to 0.
                            type: 'background',
                            paint: {
                                'background-color': '#fff',
                                'background-opacity': 1.0,
                            },
                        }, {
                            id: 'hills',
                            type: 'hillshade',
                            source: 'hillshadeSource',
                            layout: {visibility: 'visible'},
                            paint: {'hillshade-shadow-color': '#473B24'}
                        }
                    ],
                    terrain: {
                        source: 'terrainSource',
                        exaggeration: 1,
                    },
                    sources: {
                        terrainSource: {
                            type: 'raster-dem',
                            url: 'https://demotiles.maplibre.org/terrain-tiles/tiles.json',
                            tileSize: 256
                        },
                        hillshadeSource: {
                            type: 'raster-dem',
                            url: 'https://demotiles.maplibre.org/terrain-tiles/tiles.json',
                            tileSize: 256
                        }
                    },
                }
            });

            const sceneOrigin = new maplibregl.LngLat(11.5255, 47.6677);

            map.on('load', () => {
                const topLat = center[1] + 0.05;
                const leftLng = center[0] - 0.05;
                const bottomLat = center[1] - 0.05;
                const rightLng = center[0] + 0.05;
                const url = 'https://upload.wikimedia.org/wikipedia/commons/7/7c/201408_cat.png';

                map.addSource('canvas-source', {
                    type: 'image',
                    url,
                    coordinates: [
                        [leftLng, topLat],
                        [rightLng, topLat],
                        [rightLng, bottomLat],
                        [leftLng, bottomLat]
                    ]
                });

                map.addLayer({
                    id: 'canvas-layer',
                    type: 'raster',
                    source: 'canvas-source'
                });

            });

        }

        main();
    </script>
</body>

</html>
